<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Salay Glass - One Page Checkout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
<div class="page">
    <div class="shell">
        <div class="header">
            <div class="brand">
                <div class="brand-logo"></div>
                <div class="brand-text">
                    <h1>Salay Glass Checkout</h1>
                    <p>Single-page income and sales tracking with digital receipts</p>
                </div>
            </div>
            <div class="header-right">
                <div class="badge">
                    <span class="badge-dot"></span>
                    <span>Single screen &bull; Small team friendly</span>
                </div>
                <span class="status" id="statusText"></span>
            </div>
        </div>

        <div class="grid">
            <!-- LEFT: Checkout form -->
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Checkout</div>
                        <div class="card-subtitle">Record sale, payment, and generate an e-receipt</div>
                    </div>
                    <span class="pill">Step 1: Fill &nbsp;&rsaquo;&nbsp; Step 2: Save & Print</span>
                </div>

                <div class="form-row">
                    <div class="field">
                        <label for="customerName">Customer name</label>
                        <input id="customerName" type="text" placeholder="e.g. Juan Dela Cruz" />
                    </div>
                    <div class="field">
                        <label for="contact">Contact (optional)</label>
                        <input id="contact" type="text" placeholder="Phone or email" />
                    </div>
                </div>

                <div class="field">
                    <label for="description">Overall job / project description</label>
                    <textarea id="description" placeholder="e.g. Fabrication and installation of sliding aluminum window with clear glass, 2 panels, front room."></textarea>
                </div>

                <div class="field">
                    <label>Line items (optional breakdown)</label>
                    <table>
                        <thead>
                        <tr>
                            <th>Item / work details</th>
                            <th class="qty-col">Qty</th>
                            <th class="price-col">Unit price</th>
                            <th class="total-col">Line total</th>
                        </tr>
                        </thead>
                        <tbody id="lineItemsBody">
                        </tbody>
                    </table>
                    <div class="controls-row">
                        <button type="button" class="link-button" id="addLineButton">+ Add another row</button>
                        <span class="badge-small">Tip: You can leave rows empty — only valid entries count.</span>
                    </div>
                </div>

                <div class="summary-row">
                    <div class="summary-row-inner">
                        <div class="summary-group">
                            <span class="summary-label">Total amount</span>
                            <span class="summary-value" id="totalAmountDisplay">₱0.00</span>
                        </div>
                        <div class="summary-group">
                            <span class="summary-label">Amount paid</span>
                            <input id="amountPaid" type="number" min="0" step="0.01" value="0" />
                        </div>
                        <div class="summary-group">
                            <span class="summary-label">Balance</span>
                            <span class="summary-value danger" id="balanceDisplay">₱0.00</span>
                        </div>
                    </div>
                    <div class="button-row">
                        <button class="btn btn-ghost" type="button" id="clearButton">Clear form</button>
                        <button class="btn btn-primary" type="button" id="saveButton">
                            Save sale &amp; open receipt
                        </button>
                    </div>
                    <div class="error" id="formError"></div>
                </div>
            </div>

            <!-- RIGHT: Daily income & history -->
            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Daily income &amp; history</div>
                        <div class="card-subtitle">Monitor today and revisit past receipts</div>
                    </div>
                    <div class="pill">
                        <span>Selected date:&nbsp;</span>
                        <input style="background: transparent; border: none; color: inherit; font-size: 0.78rem; padding: 0;" type="date" id="filterDate" />
                    </div>
                </div>

                <div class="daily-summary">
                    <div class="daily-box">
                        <div class="daily-label">Total sales (selected day)</div>
                        <div class="daily-value" id="dailyTotalDisplay">₱0.00</div>
                    </div>
                    <div class="daily-box">
                        <div class="daily-label">Payments received</div>
                        <div class="daily-value" id="dailyPaidDisplay">₱0.00</div>
                    </div>
                </div>

                <div class="history-header-row">
                    <span class="card-subtitle">Last 50 transactions (for selected day)</span>
                    <button type="button" class="link-button" id="refreshHistoryButton">⟳ Refresh</button>
                </div>

                <div class="history-list" id="historyList">
                    <!-- Rows populated by JS -->
                </div>
            </div>
        </div>

        <div style="display:flex;justify-content:space-between;align-items:center;font-size:0.72rem;color:var(--text-muted);margin-top:2px;">
            <span>Designed for Salay Glass &mdash; a focused, one-page checkout and income tracker.</span>
            <span>Tip: Use your browser's <strong>Print</strong> → <strong>Save as PDF</strong> for e-receipts.</span>
        </div>
    </div>
</div>

<!-- Receipt modal -->
<div class="receipt-modal-backdrop" id="receiptBackdrop">
    <div class="receipt-modal" id="receiptModal">
        <div class="receipt-header">
            <h2>Salay Glass</h2>
            <p>Glass &amp; aluminum fabrication and installation</p>
            <p>Official E-Receipt</p>
        </div>
        <div id="receiptContent">
            <!-- Filled by JS -->
        </div>
        <div class="receipt-actions">
            <button type="button" class="btn btn-ghost" id="closeReceipt">Close</button>
            <button type="button" class="btn btn-primary" id="printReceipt">Print / Save PDF</button>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>